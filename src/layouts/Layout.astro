---
import '../styles/global.css';
import ModernHeader from '../components/ModernHeader.astro';
import ModernFooter from '../components/ModernFooter.astro';

export interface Props {
  title: string;
  description?: string;
}

const { title, description = 'Entrenamiento de vela especializado en clases Optimist e ILCA' } = Astro.props;
---

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <meta name="description" content={description} />
    
    <!-- SEO Meta Tags -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://541top.com" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="src/images/logo.jpg" />
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  </head>
  <body class="min-h-screen flex flex-col">
    <ModernHeader />
    <main class="flex-grow">
      <slot />
    </main>
    <ModernFooter />
    
    <!-- Global i18n Script -->
    <script is:inline>
      // Translations object
      window.translations = {
        es: {
          nav: { home: 'Inicio', events: 'Próximos Eventos', services: 'Servicios', team: 'Equipo', contact: 'Contacto' },
          hero: {
            title: '¿QUIERES SER UN',
            titleHighlight: 'REGATISTA TOP?',
            subtitle: 'Especialistas en entrenamiento de vela en las clases Optimist e ILCA. Te ayudamos a alcanzar tu máximo potencial en el agua.',
            cta: 'Contáctanos',
            services: 'Conocer Servicios'
          },
          about: {
            title: 'QUIÉNES SOMOS',
            intro: '¡Bienvenidos a <strong class="text-blue-600">541TOP Sailcoach</strong>! Somos una compañía dedicada al entrenamiento de tecnificación en las clases Optimist e ILCA.',
            description: 'En 541TOP Sailcoach nos apasiona ayudar a los navegantes a alcanzar su máximo potencial y a mejorar sus habilidades en el agua. Nuestro enfoque se basa en la tecnificación, brindando un entrenamiento integral que abarca desde la técnica de navegación hasta la preparación física y mental. Creemos firmemente que la dedicación y la orientación adecuada son la clave para el éxito en el mundo de la vela.'
          },
          events: {
            title: 'PRÓXIMOS EVENTOS',
            subtitle: 'Consulta nuestro calendario de entrenamientos, clínicas y regatas',
            viewDetails: 'Ver detalles',
            backToHome: 'Volver al inicio',
            event1: { month: 'Enero - Febrero 2026', date: '29-1', badge: 'Excellence Cup', title: 'XVIII Trofeo Euromarina Optimist', description: 'Regata internacional con más de 400 participantes. Primera prueba de la Excellence Cup.', location: 'Torrevieja, España' },
            event2: { month: 'Febrero 2026', date: '11-15', badge: '20 Nations Cup', title: '36 Vila de Palamós Trophy', description: 'Regata de referencia internacional con más de 300 participantes de 20 países.', location: 'Palamós, España' },
            event3: { month: 'Febrero 2026', date: '19-22', badge: 'Excellence Cup', title: 'Opti Orange Valencia', description: 'Regata internacional en el Real Club Náutico de Valencia con participación internacional.', location: 'Valencia, España' },
            event4: { month: 'Abril 2026', date: '2-5', badge: 'Internacional', title: '44° Lake Garda Meeting', description: 'La regata de Optimist más grande del mundo en el Lago di Garda, Italia.', location: 'Riva del Garda, Italia' }
          },
          services: {
            title: 'NUESTROS SERVICIOS',
            subtitle: 'Ofrecemos una amplia gama de servicios especializados en entrenamiento de vela',
            clinics: { title: 'CLINICS / ENTRENAMIENTOS TÉCNICOS', description: 'Concentraciones y entrenamientos grupales o individuales personalizados, diferentes niveles y modalidades: Optimist, Láser, IQFoil. Tenemos base en Chipiona pero lo realizamos a medida para ti en cualquier lugar.' },
            charter: { title: 'CHARTER BOATS', description: 'Disponemos de una amplia flota de Optimist para alquiler y barcos de entrenador para todas tus necesidades de entrenamiento y competición.' },
            regatta: { title: 'ASISTENCIA EN REGATAS', description: 'Si quieres venir a una regata con nosotros, te proporcionamos entrenador, barco de apoyo y te ayudamos con todo lo relacionado con la logística y gestiones de la regata.' },
            camp: { title: 'TRAINING CAMP', description: 'Programas intensivos de entrenamiento que tienen como objetivo mejorar las habilidades físicas, técnicas o mentales de los regatistas.' },
            ilca: { title: 'CLINICS ILCA', description: 'Entrenamientos especializados en la clase ILCA con equipamiento completo y metodología adaptada para cada nivel de navegación.' },
            clubs: { title: 'CLUBES Y FEDERACIONES', description: '¿Quieres desplazarte de una manera sencilla junto a los regatistas de tu club? 541TOP te proporciona todo lo necesario para ti, tu entrenador y compañeros de club.' }
          },
          values: {
            title: 'NUESTROS VALORES',
            subtitle: 'Los principios que guían nuestro trabajo y compromiso con cada regatista',
            excellence: { title: 'Excelencia', description: 'Buscamos la perfección en cada entrenamiento y competición, siempre con el objetivo de alcanzar el máximo rendimiento.' },
            fun: { title: 'Diversión', description: 'Creemos que aprender y mejorar debe ser divertido. El disfrute es fundamental para el desarrollo del regatista.' },
            teamwork: { title: 'Trabajo en Equipo', description: 'Fomentamos la colaboración y el apoyo mutuo entre todos los miembros del equipo y regatistas.' },
            growth: { title: 'Desarrollo Personal', description: 'Nos comprometemos con el crecimiento integral de cada regatista, tanto en el agua como fuera de ella.' }
          },
          team: {
            title: 'NUESTRO EQUIPO',
            subtitle: 'Profesionales experimentados dedicados a tu éxito en la vela',
            kike: { role: 'CEO y fundador 541TOP Sailcoach', skill1: 'Entrenador internacional clase Optimist', skill2: 'Nivel 3 AF y AL' },
            gonzalo: { role: 'Entrenador Nacional de Vela', skill1: 'Ex entrenador profesional de ILCA', skill2: 'Arquitecto Naval e Ingeniero Marítimo', skill3: 'Entrenador de Vela Nivel 3' },
            sailors: { title: 'NUESTROS REGATISTAS', subtitle: 'Talento que forma parte de nuestro equipo' }
          },
          contact: {
            title: 'CONTACTO',
            subtitle: 'Escríbenos un mensaje para más información o cualquier consulta que tengas',
            form: {
              name: 'Nombre', email: 'Email', phone: 'Teléfono', subject: 'Asunto', selectSubject: 'Selecciona un asunto',
              subjectOptions: { clinics: 'Información sobre Clínicas', charter: 'Alquiler de Barcos (Charter)', regatta: 'Asistencia a Regatas', camp: 'Campus de Entrenamiento', general: 'Consulta General', other: 'Otro' },
              message: 'Mensaje', submit: 'Enviar Mensaje', sending: 'Enviando...', success: '¡Mensaje enviado con éxito! Te responderemos pronto.', error: 'Hubo un problema al enviar el mensaje. Por favor, intenta de nuevo.', networkError: 'Error de conexión. Por favor, intenta de nuevo más tarde.'
            },
            info: { title: 'Información de Contacto', phone: 'Teléfono', location: 'Ubicación' },
            whatsapp: { title: '¡Escríbenos por WhatsApp!', subtitle: 'La forma más rápida de contactar con nosotros', button: 'WhatsApp Directo' },
            social: { title: 'Síguenos en Redes' }
          },
          eventPage: {
            backToEvents: 'Volver a eventos',
            internationalRegatta: 'Regata Internacional',
            aboutRegatta: 'Sobre la regata',
            schedule: 'Programa de la regata',
            whatIncludes: '¿Qué incluye nuestra asistencia?',
            dedicatedCoach: 'Entrenador dedicado',
            dedicatedCoachDesc: 'Seguimiento personalizado durante toda la competición.',
            supportBoat: 'Barco de apoyo',
            supportBoatDesc: 'RIB de apoyo para seguimiento en el agua y asistencia.',
            logistics: 'Gestión logística',
            logisticsDesc: 'Inscripción, mediciones y toda la gestión administrativa.',
            postRaceAnalysis: 'Análisis post-regata',
            postRaceAnalysisDesc: 'Briefing diario y análisis de cada jornada de competición.',
            eventInfo: 'Información del evento',
            dates: 'Fechas',
            location: 'Ubicación',
            organizer: 'Organizador',
            circuit: 'Circuito',
            participants: 'Participantes',
            reserve: 'Reservar plaza',
            officialWeb: 'Web oficial',
            day: 'Día',
            thurSun: 'Jueves - Domingo',
            wedSun: 'Miércoles - Domingo',
            countries: 'países',
            sailors: 'regatistas',
            sailorsCount400: '+400 regatistas',
            sailorsCount300: '+300 regatistas',
            sailorsCount500: '+500 regatistas',
            fromCountries25: 'De más de 25 países',
            fromCountries20: 'De más de 20 países',
            fromCountries30: 'De más de 30 países',
            international: 'Internacionales',
            largestInWorld: 'La más grande del mundo'
          },
          legal: {
            title: 'Derechos y Aviso Legal',
            subtitle: 'Información legal y derechos de autor'
          },
          footer: {
            description: 'Especialistas en entrenamiento de vela en las clases Optimist e ILCA.',
            quickLinks: 'Enlaces Rápidos',
            contact: 'Contacto',
            followUs: 'Síguenos',
            rights: 'Todos los derechos reservados.'
          }
        },
        en: {
          nav: { home: 'Home', events: 'Upcoming Events', services: 'Services', team: 'Team', contact: 'Contact' },
          hero: {
            title: 'DO YOU WANT TO BE A',
            titleHighlight: 'TOP SAILOR?',
            subtitle: 'Specialists in sailing training in Optimist and ILCA classes. We help you reach your maximum potential on the water.',
            cta: 'Contact Us',
            services: 'Discover Services'
          },
          about: {
            title: 'WHO WE ARE',
            intro: 'Welcome to <strong class="text-blue-600">541TOP Sailcoach</strong>! We are a company dedicated to technical training in the Optimist and ILCA classes.',
            description: 'At 541TOP Sailcoach, we are passionate about helping sailors reach their maximum potential and improve their skills on the water. Our approach is based on technical excellence, providing comprehensive training that covers everything from sailing technique to physical and mental preparation. We firmly believe that dedication and proper guidance are the keys to success in the world of sailing.'
          },
          events: {
            title: 'UPCOMING EVENTS',
            subtitle: 'Check our calendar of training sessions, clinics, and regattas',
            viewDetails: 'View details',
            backToHome: 'Back to home',
            event1: { month: 'January - February 2026', date: '29-1', badge: 'Excellence Cup', title: 'XVIII Euromarina Optimist Trophy', description: 'International regatta with more than 400 participants. First test of the Excellence Cup.', location: 'Torrevieja, Spain' },
            event2: { month: 'February 2026', date: '11-15', badge: '20 Nations Cup', title: '36 Vila de Palamós Trophy', description: 'International reference regatta with more than 300 participants from 20 countries.', location: 'Palamós, Spain' },
            event3: { month: 'February 2026', date: '19-22', badge: 'Excellence Cup', title: 'Opti Orange Valencia', description: 'International regatta at Real Club Náutico de Valencia with international participation.', location: 'Valencia, Spain' },
            event4: { month: 'April 2026', date: '2-5', badge: 'International', title: '44th Lake Garda Meeting', description: 'The largest Optimist regatta in the world at Lake Garda, Italy.', location: 'Riva del Garda, Italy' }
          },
          services: {
            title: 'OUR SERVICES',
            subtitle: 'We offer a wide range of specialized sailing training services',
            clinics: { title: 'CLINICS / TECHNICAL TRAINING', description: 'Group or individual personalized training sessions at different levels and modalities: Optimist, Laser, IQFoil. Based in Chipiona but we can customize training for you anywhere.' },
            charter: { title: 'CHARTER BOATS', description: 'We have a large fleet of Optimist boats for rent and coach boats for all your training and competition needs.' },
            regatta: { title: 'REGATTA ASSISTANCE', description: 'If you want to come to a regatta with us, we provide coach, support boat, and help you with all logistics and regatta management.' },
            camp: { title: 'TRAINING CAMP', description: 'Intensive training programs aimed at improving the physical, technical, or mental skills of sailors.' },
            ilca: { title: 'ILCA CLINICS', description: 'Specialized training in the ILCA class with complete equipment and methodology adapted to each sailing level.' },
            clubs: { title: 'CLUBS AND FEDERATIONS', description: 'Want to travel easily with the sailors from your club? 541TOP provides everything you need for you, your coach, and club mates.' }
          },
          values: {
            title: 'OUR VALUES',
            subtitle: 'The principles that guide our work and commitment to each sailor',
            excellence: { title: 'Excellence', description: 'We seek perfection in every training and competition, always with the goal of achieving maximum performance.' },
            fun: { title: 'Fun', description: 'We believe that learning and improving should be fun. Enjoyment is fundamental for the development of the sailor.' },
            teamwork: { title: 'Teamwork', description: 'We promote collaboration and mutual support among all team members and sailors.' },
            growth: { title: 'Personal Growth', description: 'We are committed to the comprehensive growth of each sailor, both on and off the water.' }
          },
          team: {
            title: 'OUR TEAM',
            subtitle: 'Experienced professionals dedicated to your success in sailing',
            kike: { role: 'CEO and Founder 541TOP Sailcoach', skill1: 'International Optimist Class Coach', skill2: 'Level 3 AF and AL' },
            gonzalo: { role: 'National Sailing Coach', skill1: 'Former professional ILCA coach', skill2: 'Naval Architect and Marine Engineer', skill3: 'Level 3 Sailing Coach' },
            sailors: { title: 'OUR SAILORS', subtitle: 'Talent that is part of our team' }
          },
          contact: {
            title: 'CONTACT',
            subtitle: 'Write us a message for more information or any questions you have',
            form: {
              name: 'Name', email: 'Email', phone: 'Phone', subject: 'Subject', selectSubject: 'Select a subject',
              subjectOptions: { clinics: 'Clinics Information', charter: 'Boat Rental (Charter)', regatta: 'Regatta Assistance', camp: 'Training Camp', general: 'General Inquiry', other: 'Other' },
              message: 'Message', submit: 'Send Message', sending: 'Sending...', success: 'Message sent successfully! We will respond soon.', error: 'There was a problem sending the message. Please try again.', networkError: 'Connection error. Please try again later.'
            },
            info: { title: 'Contact Information', phone: 'Phone', location: 'Location' },
            whatsapp: { title: 'Write us on WhatsApp!', subtitle: 'The fastest way to contact us', button: 'Direct WhatsApp' },
            social: { title: 'Follow us on Social Media' }
          },
          eventPage: {
            backToEvents: 'Back to events',
            internationalRegatta: 'International Regatta',
            aboutRegatta: 'About the regatta',
            schedule: 'Race schedule',
            whatIncludes: 'What does our assistance include?',
            dedicatedCoach: 'Dedicated coach',
            dedicatedCoachDesc: 'Personalized follow-up throughout the competition.',
            supportBoat: 'Support boat',
            supportBoatDesc: 'Support RIB for on-water tracking and assistance.',
            logistics: 'Logistics management',
            logisticsDesc: 'Registration, measurements, and all administrative management.',
            postRaceAnalysis: 'Post-race analysis',
            postRaceAnalysisDesc: 'Daily briefing and analysis of each competition day.',
            eventInfo: 'Event information',
            dates: 'Dates',
            location: 'Location',
            organizer: 'Organizer',
            circuit: 'Circuit',
            participants: 'Participants',
            reserve: 'Reserve spot',
            officialWeb: 'Official website',
            day: 'Day',
            thurSun: 'Thursday - Sunday',
            wedSun: 'Wednesday - Sunday',
            countries: 'countries',
            sailors: 'sailors',
            sailorsCount400: '+400 sailors',
            sailorsCount300: '+300 sailors',
            sailorsCount500: '+500 sailors',
            fromCountries25: 'From more than 25 countries',
            fromCountries20: 'From more than 20 countries',
            fromCountries30: 'From more than 30 countries',
            international: 'International',
            largestInWorld: 'The largest in the world'
          },
          legal: {
            title: 'Rights and Legal Notice',
            subtitle: 'Legal information and copyright'
          },
          footer: {
            description: 'Specialists in sailing training in Optimist and ILCA classes.',
            quickLinks: 'Quick Links',
            contact: 'Contact',
            followUs: 'Follow Us',
            rights: 'All rights reserved.'
          }
        }
      };

      function getNestedValue(obj, path) {
        return path.split('.').reduce(function(acc, part) { return acc && acc[part]; }, obj);
      }

      function setLanguage(lang) {
        var t = window.translations[lang];
        if (!t) return;
        
        // Update all elements with data-i18n attribute
        var elements = document.querySelectorAll('[data-i18n]');
        for (var i = 0; i < elements.length; i++) {
          var el = elements[i];
          var key = el.getAttribute('data-i18n');
          if (key) {
            var translation = getNestedValue(t, key);
            if (translation) {
              if (el.hasAttribute('data-i18n-html')) {
                el.innerHTML = translation;
              } else {
                el.textContent = translation;
              }
            }
          }
        }

        // Update language indicator
        var currentLangEl = document.getElementById('current-lang');
        if (currentLangEl) {
          currentLangEl.textContent = lang.toUpperCase();
        }

        // Update active state in dropdown
        var langOptions = document.querySelectorAll('.lang-option');
        for (var j = 0; j < langOptions.length; j++) {
          var opt = langOptions[j];
          opt.classList.remove('active');
          if (opt.getAttribute('data-lang') === lang) {
            opt.classList.add('active');
          }
        }

        // Save preference
        localStorage.setItem('language', lang);
        document.documentElement.lang = lang;
      }

      // Make setLanguage globally available
      window.setLanguage = setLanguage;

      // Initialize on page load
      document.addEventListener('DOMContentLoaded', function() {
        var savedLang = localStorage.getItem('language');
        var browserLang = navigator.language.startsWith('es') ? 'es' : 'en';
        var initialLang = savedLang || browserLang;
        
        setLanguage(initialLang);

        // Language toggle dropdown
        var langToggle = document.getElementById('language-toggle');
        var langDropdown = document.getElementById('language-dropdown');
        
        if (langToggle && langDropdown) {
          langToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            langDropdown.classList.toggle('hidden');
          });

          // Close dropdown when clicking outside
          document.addEventListener('click', function() {
            langDropdown.classList.add('hidden');
          });

          // Language option buttons
          var langBtns = document.querySelectorAll('.lang-option');
          for (var k = 0; k < langBtns.length; k++) {
            langBtns[k].addEventListener('click', function(e) {
              e.stopPropagation();
              var lang = this.getAttribute('data-lang');
              if (lang) {
                setLanguage(lang);
                langDropdown.classList.add('hidden');
              }
            });
          }
        }
      });
    </script>
  </body>
</html>